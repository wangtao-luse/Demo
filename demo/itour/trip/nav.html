<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			a{
				display: block;
			}
			.nav2{
				margin-left: 20px;
			}
			.nav3{
				margin-left: 30px;
			}
			.nav4{
				margin-left: 40px;
			}
			.nav5{
				margin-left: 50px;
			}
		</style>
		<script type="text/javascript" src="../../js/common/jquery-3.4.1.js.js" ></script>
	    <script>
	    	$(function(){
	    		showNav();
	    		createNav();
	    	});
	    	function showNav(){
	    		$(".richContent-inner h2").each(function(index,item){
	    		   $(this).prop("id","item-"+(index+1))
	    	    });
	    	     var i = 1;
	    	     var sm_parent="";
	    	    $(".richContent-inner h3").each(function(index,item){
		    		 var parent_id =  findParent($(this),"H2");
		    		 if(index==0){
		    		 	sm_parent = parent_id;
		    		 }
		    		 if(sm_parent!=parent_id){
	    		 		i=1;
	    		 		sm_parent =parent_id;
	    		 	 }
		    		 $(this).prop("id",parent_id+"-"+i);
		    		 i++;
	    	    });
	    	     sm_parent="";
	    	     i=1;
	    	     $(".richContent-inner h4").each(function(index,item){
		    		 var parent_id =  findParent($(this),"H3");
		    		 if(index==0){
		    		 	sm_parent = parent_id;
		    		 }
		    		 if(sm_parent!=parent_id){
	    		 		i=1;
	    		 		sm_parent =parent_id;
	    		 	 }
		    		 $(this).prop("id",parent_id+"-"+i);
		    		 i++;
	    	    });
	    	    sm_parent="";
	    	     i=1;
	    	     $(".richContent-inner h5").each(function(index,item){
		    		 var parent_id =  findParent($(this),"H4");
		    		 if(index==0){
		    		 	sm_parent = parent_id;
		    		 }
		    		 if(sm_parent!=parent_id){
	    		 		i=1;
	    		 		sm_parent =parent_id;
	    		 	 }
		    		 $(this).prop("id",parent_id+"-"+i);
		    		 i++;
	    	    });
	    	    sm_parent="";
	    	     i=1;
	    	     $(".richContent-inner h6").each(function(index,item){
		    		 var parent_id =  findParent($(this),"H5");
		    		 if(index==0){
		    		 	sm_parent = parent_id;
		    		 }
		    		 if(sm_parent!=parent_id){
	    		 		i=1;
	    		 		sm_parent =parent_id;
	    		 	 }
		    		 $(this).prop("id",parent_id+"-"+i);
		    		 i++;
	    	    });
	    	   
	    	   
	    	}
	    	function findParent(th,p_node){
	    		//获取当前元素的上一个兄弟节点
	    		var $this = $(th).prev();
	    		var parent_id = $($this).prop("id");
	    		//获取当前元素的上一个兄弟节点的标签名称
	    		var tName = $($this).prop("tagName");
	    		var reg = /^H\d{1}$/;
	    		if(tName!=p_node||!reg.test(tName)){
	    		  return findParent($this,p_node);
	    		}
	    		return parent_id;
	    		
	    	}
	    	function createNav(){
	    		var html = $("#nav");
	    	 $(".richContent-inner h2").each(function(){
	    	 	var target = $(this).prop("id");
	    	 	var title = $(this).text();
	    	 	html.append("<a class='list-group-item text-primary' href='#"+target+"'>"+title+"</a>");
	    	 	createChild("h3",target);
	    	 	
	    	 })
	    	}
	       function createChild(node,target){
	       	var html = $("#nav"); 
	       	var t = parseInt(node.substring(1))-1;//2
	       	//h3        item-1~item-N
	       	$(node+"[id^='"+target+"']").each(function(){
	       		var title = $(this).text();
	       		var target_ = $(this).prop("id");
	       		html.append("<a class='list-group-item nav"+t+"' href='#"+target_+"'>"+title+"</a>");
	       		var node_ ="h"+(t+2);
	       		if((t+1)<6){
	       		  return createChild(node_,target_);
	       		}
	       		
	       		
	       	});
	       	
	       
	       }
	    </script>
	</head>
	<body>
		<div class="richContent-inner">
			<h2>为什么会出现Docker?</h2>
			<p></p>
			<h3>传统开发中的问题</h3>
			<p></p>
			<h3>Docker如何解决的</h3>
			<h2>Docker的设计理论</h2>
			<p></p>
			<h2>Docker与虚拟机的区别</h2>
			<h3>1.虚拟机</h3>
			<p></p>
			<h3>2.虚拟机机的优点</h3>
			<p></p>
			<h3>3.容器技术</h3>
			<p></p>
			<h4>什么是容器技术</h4>
			<p></p><p></p><p></p>
			 <h5>我是H5标签</h5>
			 <p></p><p></p>
			 <h6>我是H6标签</h6>
			<p></p>
			<h4>容器技术底层原理</h4>
			<p></p>
			<h3>4.容器技术优点</h3>
			<p></p>
			<h2>为什么使用DOcker</h2>
		</div>
		
		<div>文章导航</div>
		<div id="nav"></div>
	</body>
</html>
